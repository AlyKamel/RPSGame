{"version":3,"sources":["ServerConnection.js","MatchSetup.js","MoveImage.js","MatchAction.js","MatchVersus.js","MatchArena.js","MatchEnd.js","App.js","index.js"],"names":["rpsserver","post","url","data","fetch","method","body","sendMove","matchID","userID","move","params","URLSearchParams","uploadMove","image","Numberfield","props","name","type","min","onChange","changeHandler","Textfield","maxLength","OpponentSelector","id","value","defaultChecked","htmlFor","GameCountSelector","JoinCreateMatch","onEntryChange","MatchSetup","selectMatchEntry","event","joinMatch","target","setState","matchEntryChosen","handleChange","submit","preventDefault","username","callback","then","res","json","console","log","catch","err","alert","SC","state","user","promise","isOpponentBot","gamecount","playerId","append","opponentType","ok","message","match","startMatch","loggedIn","matchEntry","this","onSubmit","choiceMade","disabled","React","Component","MoveImage","path","src","alt","onClick","handleClick","MatchCounter","winCount","lossCount","tieCount","MatchAction","selectMove","handleResult","showResult","duelresult","endresult","moves","i","push","class","MoveUpload","doUpload","file","document","querySelector","files","encType","accept","MatchVersus","setTimeout","afterResultShown","opponent","MatchArena","toActionView","duelcount","endMatch","moveChosen","players","find","p","prevState","Error","view","opponentText","undefined","MatchEnd","resultText","result","toStartPage","App","toMatchAction","viewMode","toMatchEnd","className","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.12102d2e.chunk.js","sourcesContent":["\nconst rpsserver = \"https://rps-game-server.herokuapp.com/\" //\"http://localhost:3000/\"\n\nfunction post(url, data) {\n    return fetch(url, { method: \"POST\", body: data })\n}\n\nexport function createPlayer(username, callback) {\n    const params = new URLSearchParams({ name: username }); //x-www-form-urlencoded\n\n    post(rpsserver + 'start', params)\n    .then(res => res.json())\n    .then(data => {\n        console.log(data)\n        callback(data)\n    })\n    .catch((err) => {\n        alert('unable to create player: ' + err)\n        return -1\n    })\n}\n\nexport function createMatch(userID, isOpponentBot, gamecount) {\n    const params = new URLSearchParams({ gamecount: gamecount, playerId: userID })\n    if (isOpponentBot)\n        params.append('botMatch', true)\n    return post(rpsserver + 'matches', params)\n}\n\nexport function joinMatch(matchID, userID) {\n    return post(`${rpsserver}matches/${matchID}/players/${userID}`)\n}\n\nexport function sendMove(matchID, userID, move) {\n    const params = new URLSearchParams({ move: move })\n    return post(`${rpsserver}matches/${matchID}/players/${userID}/play`, params)\n}\n\n\nexport function uploadMove(matchID, userID, image) {\n    const url = `${rpsserver}matches/${matchID}/players/${userID}/play_upload`\n    return fetch(url, { \n        method: \"POST\", \n        body: image\n    })\n}","import React from 'react'\nimport * as SC from './ServerConnection'\n\nclass MatchSetup extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = { loggedIn: false, matchEntryChosen: false, joinMatch: false, gamecount: 3, opponentType: 'bot'}\n    }\n\n    selectMatchEntry = (event) => {\n        const joinMatch = event.target.value === 'joinMatch'\n        this.setState({ matchEntryChosen: true, joinMatch: joinMatch})\n    }\n\n    handleChange = (event) => {\n        const name = event.target.name\n        this.setState({ [name]: event.target.value });\n    }\n\n    submit = (event) => {\n        event.preventDefault()\n        SC.createPlayer(this.state.username, (user) => {\n            var promise\n            if (this.state.joinMatch)\n                promise = SC.joinMatch(this.state.matchID, user.id)\n            else\n                promise = SC.createMatch(user.id, this.state.opponentType === 'bot', this.state.gamecount)\n\n            promise\n                .then(res => {\n                    if (!res.ok)\n                        return res.json().then(err => { throw err.message })\n                    return res.json()\n                })\n                .then(match => {\n                    this.props.startMatch(match, user)\n                })\n                .catch(err => {\n                    alert(`unable to ${this.state.joinMatch ? 'join' : 'create'} match: ${err}`)\n                })\n        })\n    }\n\n    render() {\n        var matchEntry = ''\n        if (this.state.matchEntryChosen) {\n            if (this.state.joinMatch)\n                matchEntry = <Numberfield name='matchID' changeHandler={this.handleChange} />\n            else\n                matchEntry = <div>\n                    <OpponentSelector changeHandler={this.handleChange}/>\n                    <GameCountSelector changeHandler={this.handleChange}/>\n                </div>\n        }\n\n        return (\n            <div>\n                <h1>RPS Game</h1>\n                <form onSubmit={this.submit}>\n                    <Textfield name='username' changeHandler={this.handleChange} />\n                    <br />\n\n                    {matchEntry}\n\n                    <br />\n\n                    <JoinCreateMatch choiceMade={this.state.matchEntryChosen} joinMatch={false} onEntryChange={this.selectMatchEntry} />\n\n                    <input\n                        type='submit' disabled={!this.state.matchEntryChosen}\n                    />\n                </form>\n            </div>\n        )\n    }\n}\n\nfunction Numberfield(props) {\n    return (\n        <label>\n            {props.name}:\n            <input\n                name={props.name}\n                type='number'\n                min='0'\n                onChange={props.changeHandler}\n            />\n        </label>\n    )\n}\n\nfunction Textfield(props) {\n    return (\n        <label>\n            {props.name}:\n            <input\n                name={props.name}\n                type='text'\n                maxLength='10'\n                onChange={props.changeHandler}\n            />\n        </label>\n    )\n}\n\nfunction OpponentSelector(props) {\n    return (\n        <div>\n            <input type=\"radio\" id=\"bot\" name=\"opponentType\" value=\"bot\" defaultChecked onChange={props.changeHandler} />\n            <label htmlFor=\"bot\">Bot</label>\n            <input type=\"radio\" id=\"human\" name=\"opponentType\" value=\"human\" onChange={props.changeHandler}/>\n            <label htmlFor=\"human\">Human</label>\n        </div>\n    )\n}\n\nfunction GameCountSelector(props) {\n    return (\n        <div>\n            <label htmlFor=\"gamecount\">Game count:</label>\n            <input type=\"radio\" id=\"1gamecount\" name=\"gamecount\" value={1} onChange={props.changeHandler}/>\n            <label htmlFor=\"1gamecount\">1</label>\n            <input type=\"radio\" id=\"3gamecount\" name=\"gamecount\" value={3} defaultChecked onChange={props.changeHandler}/>\n            <label htmlFor=\"3gamecount\">3</label>\n            <input type=\"radio\" id=\"10gamecount\" name=\"gamecount\" value={10} onChange={props.changeHandler}/>\n            <label htmlFor=\"10gamecount\">10</label><br />\n        </div>\n    )\n}\n\nfunction JoinCreateMatch(props) {\n    return (\n        <div>\n            <input type=\"radio\" id=\"joinMatch\" name=\"enterMatch\" value=\"joinMatch\" onChange={props.onEntryChange}/>\n            <label htmlFor=\"joinMatch\">join match</label>\n            <input type=\"radio\" id=\"createMatch\" name=\"enterMatch\" value=\"createMatch\" onChange={props.onEntryChange}/>\n            <label htmlFor=\"createMatch\">create match</label>\n            <br />\n        </div>\n    )\n}\n\nexport default MatchSetup;","\nexport function MoveImage(props) {\n    const name = NameFromMoveType(props.move)\n    const path = '/resources/hand-' + name + '.png'\n    return (\n        <input type='image' src={path} alt={name} value={props.move} onClick={props.handleClick} />\n    )\n}\n\nexport function MatchCounter(props) {\n    return (\n        <p>\n            MatchID <span>{props.matchID}</span>:\n            Win: <span>{props.winCount}</span> |\n            Loss: <span>{props.lossCount}</span> |\n            Tie: <span>{props.tieCount}</span>\n        </p>\n    )\n}\n\nfunction NameFromMoveType(type) {\n    const movenames = ['rock', 'paper', 'scissors']\n    return movenames[type]\n}","import React from 'react'\nimport * as MI from './MoveImage'\nimport * as SC from './ServerConnection'\n\nclass MatchAction extends React.Component {\n    selectMove = (event) => {\n        const move = event.target.value\n        const promise = SC.sendMove(this.props.matchID, this.props.userID, move)\n        this.handleResult(promise)\n    }\n\n    uploadMove = (image) => {\n        const promise = SC.uploadMove(this.props.matchID, this.props.userID, image)\n        this.handleResult(promise)\n    }\n\n    handleResult = (promise) => {\n        promise.then(res => {\n                if (!res.ok)\n                    return res.json().then(err => { throw err.message })\n                return res.json()\n            })\n            .then((data) => {\n                this.props.showResult(data.match, data.duelresult, data.endresult)\n            })\n            .catch(err => {\n                alert(`unable to send move: ${err}`)\n            })\n    }\n\n    render() {\n        const moves = []\n        for (var i = 0; i <= 2; ++i)\n            moves.push(<MI.MoveImage move={i} key={i} handleClick={this.selectMove} />)\n\n        return (\n            <div class=\"container-fluid\">\n                <p>Select a move:</p>\n                \n                {moves}\n\n                <br/>\n                <p>Or upload a move:</p>\n                <MoveUpload uploadMove={this.uploadMove}/>\n                \n                <br />\n            </div>\n        )\n    }\n}\n\n// TODO: error with CORS\nclass MoveUpload extends React.Component {\n    doUpload = () => {\n        const file = document.querySelector('input[type=\"file\"]').files[0];\n        this.props.uploadMove(file)\n    }\n\n    render() {\n        return (\n            <form id=\"uploadForm\" encType=\"multipart/form-data\">\n                <input name=\"file\" type=\"file\" accept=\"image/*\" />\n                <input type=\"button\" value=\"Upload\" onClick={this.doUpload} />\n            </form>\n        )\n    }\n}\n\nexport default MatchAction;","import React from 'react'\nimport * as MI from './MoveImage'\n\nclass MatchVersus extends React.Component {\n\n    componentDidMount() {\n        setTimeout(() => {\n            this.props.afterResultShown()\n        }, 1200);\n    }\n\n    render() {\n        return (\n            <div>\n                <MI.MoveImage move={this.props.user.move} />\n                &nbsp;&nbsp;\n                \n                <MI.MoveImage move={this.props.opponent.move} />\n            </div>\n        )\n    }\n}\n\nexport default MatchVersus;","import React from 'react'\nimport MatchAction from './MatchAction'\nimport MatchVersus from './MatchVersus'\nimport * as MI from './MoveImage'\n\nclass MatchArena extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = { moveChosen: false, match: this.props.match, winCount: 0, lossCount: 0, tieCount: 0, user: this.props.user}\n        this.state.opponent = props.match.players.find(p => p.id !== this.props.user.id)\n    }\n\n    toActionView = () => {\n        if (this.state.match.duelcount === 0) {\n            this.props.endMatch(this.state.endresult)\n        } else {\n            this.setState({ moveChosen: false })\n        }\n    }\n\n    showResult = (match, duelresult, endresult) => {\n        this.setState({moveChosen: true, match: match,\n            user: match.players.find(p => p.id === this.props.user.id),\n            opponent: match.players.find(p => p.id !== this.props.user.id),\n            endresult: endresult\n        })\n\n        switch (duelresult) {\n            case 1: \n                this.setState(prevState => ({winCount: prevState.winCount + 1}))\n                break\n            case -1:\n                this.setState(prevState => ({ lossCount: prevState.lossCount + 1 }))\n                break\n            case 0:\n                this.setState(prevState => ({ tieCount: prevState.tieCount + 1 }))\n                break\n            default:\n                throw Error('invalid result')\n        }\n    }\n\n    render() {\n        var view = ''\n        if (!this.state.moveChosen)\n            view = <MatchAction matchID={this.state.match.id} userID={this.props.user.id} showResult={this.showResult}/>\n        else\n            view = <MatchVersus user={this.state.user} opponent={this.state.opponent} afterResultShown={this.toActionView}/>\n\n        const opponentText = this.state.opponent === undefined ? ' waiting for opponent...' : ' vs. Opponent ' + this.state.opponent.name\n\n        return (\n            <div>\n                <p>Player {this.state.user.name + opponentText}</p>\n                {view}\n                <MI.MatchCounter matchID={this.state.match.id} winCount={this.state.winCount} lossCount={this.state.lossCount} tieCount={this.state.tieCount} />\n            </div>\n        );\n    }\n}\n\nexport default MatchArena;","import React from 'react'\n\nclass MatchEnd extends React.Component {\n    render() {\n        var resultText\n        switch (this.props.result) {\n            case 1:\n                resultText = 'win'\n                break\n            case -1:\n                resultText = 'lose'\n                break\n            case 0:\n                resultText = 'tie'\n                break\n            default:\n                throw new Error('invalid result')\n        }\n\n        return (\n            <div>\n                <p>Game Over. You {resultText}</p>\n                <button onClick={this.props.toStartPage}>To start page</button>\n            </div>\n        );\n    }\n}\n\nexport default MatchEnd;","import React from 'react'\nimport './App.css'\nimport MatchSetup from './MatchSetup'\nimport MatchArena from './MatchArena'\nimport MatchEnd from './MatchEnd'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { viewMode: 0, match: null, user: null, winCount: 0, lossCount: 0, tieCount: 0, endresult: null }\n  }\n\n  toMatchAction = (match, user) => {\n    this.setState({ match: match, user: user, viewMode: 1})\n  }\n\n  toMatchEnd = (endresult) => {\n    this.setState({viewMode: 2, endresult: endresult})\n  }\n\n  toStartPage = () => {\n    this.setState({ match: null, user: null, winCount: 0, lossCount: 0, tieCount: 0, endresult: null, viewMode: 0 })\n  }\n\n  render() {\n    var view = ''\n    switch (this.state.viewMode) {\n      case 0:\n        view = <MatchSetup startMatch={this.toMatchAction} />\n        break\n      case 1:\n        view = <MatchArena match={this.state.match} user={this.state.user} endMatch={this.toMatchEnd}/>\n        break\n      case 2:\n        view = <MatchEnd result={this.state.endresult} toStartPage={this.toStartPage}/>\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    return (\n      <div className=\"App\">\n        {view}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}